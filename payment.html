<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Clothify — Payment</title>
  <style>
    :root{--accent:#8b5e3c;--muted:#f7f4f2}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Arial;background:var(--muted);color:#222}
    header{display:flex;justify-content:space-between;align-items:center;padding:16px 22px;background:#fff;box-shadow:0 6px 20px rgba(10,10,10,0.04)}
    .brand{font-weight:700;color:var(--accent)}
    .wrap{max-width:900px;margin:22px auto;padding:18px}
    .grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
    .panel{background:#fff;padding:18px;border-radius:10px;box-shadow:0 8px 24px rgba(10,10,10,0.05)}
    label{display:block;margin:8px 0 6px;font-weight:600}
    input,select{width:100%;padding:10px;border-radius:8px;border:1px solid #eee;box-sizing:border-box}
    .paybtn{display:inline-block;margin-top:12px;padding:12px 16px;border-radius:10px;background:linear-gradient(90deg,var(--accent),#b87c5a);color:#fff;text-decoration:none;border:0;font-weight:800}
    .summary .row{display:flex;justify-content:space-between;margin:8px 0}
    @media (max-width:820px){.grid{grid-template-columns:1fr}}
  </style>
</head>
<body>
  <header>
    <div class="brand">Clothify</div>
    <nav>
      <a href="index.html" style="margin-right:10px;color:var(--accent);text-decoration:none;font-weight:700">Home</a>
      <a href="products.html" style="color:var(--accent);text-decoration:none;font-weight:700">Products</a>
    </nav>
  </header>

  <div class="wrap">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <h2 style="margin:0">Checkout</h2>
      <div style="color:#666">Secure payment — test mode</div>
    </div>

    <div class="grid">
      <!-- Left: form -->
      <div class="panel">
        <form id="paymentForm" action="thankyou.html" method="get">
          <input type="hidden" name="product" id="productInput" value="">
          <input type="hidden" name="price" id="priceInput" value="">

          <label for="name">Full name</label>
          <input id="name" name="name" required placeholder="Your name">

          <label for="email">Email</label>
          <input id="email" name="email" type="email" required placeholder="you@example.com">

          <label for="address">Shipping address</label>
          <input id="address" name="address" required placeholder="Street, City, PIN">

          <label for="method">Payment method</label>
          <select id="method" name="method" required>
            <option value="card">Card</option>
            <option value="upi">UPI</option>
            <option value="cod">Cash on Delivery</option>
          </select>

          <button class="paybtn" type="submit">Pay now</button>
        </form>
      </div>

      <!-- Right: summary -->
      <aside class="panel summary">
        <h3 style="margin-top:0">Order summary</h3>
        <div class="row"><div id="summaryProduct" style="font-weight:700">No product selected</div><div id="summaryPrice">—</div></div>
        <hr style="border:none;height:1px;background:#f0f0f0;margin:12px 0">
        <div class="row"><div>Subtotal</div><div id="subtotal">—</div></div>
        <div class="row"><div>Shipping</div><div id="shipping">₹0</div></div>
        <div style="height:12px"></div>
        <div class="row"><div style="font-weight:800">Total</div><div id="total" style="font-weight:800">—</div></div>
        <div style="margin-top:14px;color:#666;font-size:.95rem">Tip: click a product's <strong>Buy Now</strong> on the products page to prefill product here.</div>
      </aside>
    </div>
  </div>

  <script>
    // Fill form values from query params (product & price)
    function getQueryParams(){
      const q = new URLSearchParams(window.location.search);
      return {
        product: q.get('product') || '',
        price: q.get('price') || ''
      };
    }

    function formatINR(n){
      if(!n) return '—';
      return '₹' + Number(n).toLocaleString('en-IN');
    }

    const {product, price} = getQueryParams();
    const productInput = document.getElementById('productInput');
    const priceInput = document.getElementById('priceInput');
    const summaryProduct = document.getElementById('summaryProduct');
    const summaryPrice = document.getElementById('summaryPrice');
    const subtotal = document.getElementById('subtotal');
    const total = document.getElementById('total');
    const shipping = document.getElementById('shipping');

    if(product){
      productInput.value = product;
      priceInput.value = price;
      summaryProduct.textContent = decodeURIComponent(product);
      summaryPrice.textContent = formatINR(price);
      subtotal.textContent = formatINR(price);
      // simple shipping rule: free over 1500
      const pnum = Number(price) || 0;
      const ship = pnum > 1499 ? 0 : 99;
      shipping.textContent = ship === 0 ? 'Free' : '₹' + ship;
      total.textContent = formatINR(pnum + ship);
    } else {
      summaryProduct.textContent = 'No product selected';
      summaryPrice.textContent = '—';
      subtotal.textContent = '—';
      total.textContent = '—';
    }

    // optional: ensure product present before paying
    document.getElementById('paymentForm').addEventListener('submit', function(e){
      if(!productInput.value){
        // allow paying even without a product — but warn
        if(!confirm('No product selected. Do you want to continue?')) e.preventDefault();
      }
    });
  </script>
</body>
</html>
